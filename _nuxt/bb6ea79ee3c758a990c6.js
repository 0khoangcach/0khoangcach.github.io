(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{364:function(e,t,r){"use strict";r.r(t);r(19),r(20),r(5),r(36);var n=r(17),o=(r(22),r(131)),c=r(67),l={middleware:"auth",mixins:[o.a],data:function(){return{name:"",serial:"",nameRules:[function(e){return!!e||"Tên là bắt buộc"},function(e){return e&&e.length<=50||"Phải nhập ít hơn 50 ký tự"}],serialRules:[function(e){return!!e||"Số serial là bắt buộc"},function(e){return e&&e.length<=10||"Phải nhập ít hơn 10 ký tự"}],valid:!0,lazy:!1}},mounted:function(){this.isEdit&&(this.name=this.device.name)},methods:{isExistSerial:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.c.ref("devices").child(e.serial).once("value",(function(e){return e}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},onDelete:function(){var e=this;c.c.ref("devices/".concat(this.device.key)).remove().then((function(){e.gotoPage("/")})).catch((function(e){console.error("Error removing document: ",e)}))},onSave:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var data,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.form.validate()&&(e.serial,data={name:e.name,serial:e.serial,state:0,createdDate:(new Date).toString(),userId:e.loginUser.id},(r={})["/devices/".concat(e.serial)]=data,r["/users/".concat(e.loginUser.id,"/").concat(e.serial)]=!0,c.c.ref().update(r).then((function(){e.$router.push("/")})));case 2:case"end":return t.stop()}}),t)})))()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()}},computed:{isEdit:function(){return this.device}},components:{}},d=r(44),v=r(59),f=r.n(v),m=r(320),h=r(333),w=r(321),k=r(360),x=r(361),_=r(334),R=r(366),component=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"grid-list-xs":""}},[r("v-row",{staticStyle:{"margin-bottom":"50px"},attrs:{justify:"center","no-gutters":""}},[r("v-col",{attrs:{cols:"12",sm:"8"}},[r("v-form",{ref:"form",staticStyle:{width:"100%"},attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{outlined:"",label:"Tên thiết bị",counter:50,rules:e.nameRules,required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),e.isEdit?e._e():r("v-text-field",{attrs:{outlined:"",label:"Số seri",counter:10,rules:e.serialRules,required:""},model:{value:e.serial,callback:function(t){e.serial=t},expression:"serial"}}),e._v(" "),r("v-divider",{staticClass:"mt-3 mb-5"}),e._v(" "),r("v-row",{attrs:{justify:"center","no-gutters":""}},[r("v-col",{staticClass:"pr-1",attrs:{cols:"6"}},[r("v-btn",{attrs:{disabled:!e.valid,color:"primary",block:"",height:"40"},on:{click:e.onSave}},[e._v("Lưu")])],1),e._v(" "),e.isEdit?r("v-col",{staticClass:"pl-1",attrs:{cols:"6"}},[r("v-btn",{attrs:{color:"error",block:"",height:"40"},on:{click:e.onDelete}},[e._v("Xóa")])],1):e._e()],1)],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{VBtn:m.a,VCol:h.a,VContainer:w.a,VDivider:k.a,VForm:x.a,VRow:_.a,VTextField:R.a})}}]);